{% extends "base.html" %}

{% block title %}{{ "Edit" if table else "Create" }} PDS Table{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ "Edit" if table else "Create" }} PDS Table</h2>
    <a href="/pds-tables" class="btn btn-secondary">Back to List</a>
</div>

{% if error %}
<div class="alert alert-danger mb-4">
    {{ error }}
</div>
{% endif %}

<div class="row">
    <div class="col-md-6">
        <form method="POST">
            <div class="mb-3">
                <label for="table_name" class="form-label">Table Name</label>
                <input type="text" class="form-control" id="table_name" name="table_name" value="{{ table.table_name if table else '' }}" required>
            </div>
            
            <div class="mb-3">
                <label for="page_size" class="form-label">Page Size (Max 10000)</label>
                <input type="number" class="form-control" id="page_size" name="page_size" 
                       value="{{ table.page_size if table else 10000 }}" 
                       min="1" max="10000" required>
                <div class="form-text">Maximum number of records per page (1-10000)</div>
            </div>
            
            <div class="mb-3">
                <label for="source_connection_id" class="form-label">Source Connection</label>
                <select class="form-select" id="source_connection_id" name="source_connection_id" required>
                    <option value="">Select a source connection...</option>
                    {% for conn in source_connections %}
                    <option value="{{ conn.id }}" {{ 'selected' if table and table.source_connection_id == conn.id else '' }}>
                        {{ conn.connection_name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="mb-3">
                <label for="destination_connection_id" class="form-label">Destination Connection</label>
                <select class="form-select" id="destination_connection_id" name="destination_connection_id" required>
                    <option value="">Select a destination connection...</option>
                    {% for conn in destination_connections %}
                    <option value="{{ conn.id }}" {{ 'selected' if table and table.destination_connection_id == conn.id else '' }}>
                        {{ conn.connection_name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary">{{ "Update" if table else "Create" }} Table</button>
        </form>
    </div>
</div>
{% endblock %} 